# 交互说明文档

## 用户通过终端进行交互 [/ws/tty]

### 前端与api服务端

#### 前端传入部分

|名称|类型|是否必须|说明|
|-|-|-|-|
|jwt|string|否|用户登录获得的jwt，尽在初次连接时需要|
|project|string|否|当前所在项目名，尽在初次连接时需要|
|msg|string|是|用户的输入值，该连接中传送用户输入的字符流|

#### 服务端返回部分

|名称|类型|是否必须|说明|
|-|-|-|-|
|ok|bool|是|是否连接成功|
|msg|string|是|连接成功则为后台终端的输出值，包括stdout和stderr；连接失败则为说明信息|

### api服务端与容器端

#### 后台请求容器端创建容器

##### 容器端传入部分
|名称|类型|是否必须|说明|
|-|-|-|-|
|image|string|是|指明需要启动容器的镜像|
|pwd|string|否|当前的用户路径|
|env|[]string|否|额外环境变量|
|mnt|[]string|否|指明被挂载目录在系统中的位置，空则表示不进行挂载|
|target|[]string|否|指明上面给出的目录应该挂载到容器的某一具体位置|
|network|[]string|是|指明用户的容器所在虚拟网络名称|

##### 容器端传回部分
|名称|类型|是否必须|说明|
|-|-|-|-|
|id|string|是|容器id|
|ok|bool|是|指明当前创建是否成功|
|msg|string|否|相关说明信息|

#### 后台请求连接到容器

##### 容器端传入部分
|名称|类型|是否必须|说明|
|-|-|-|-|
|id|string|是|需要连接容器的id，仅第一次需要包含|
|msg|string|是|需要写入容器的信息|

##### 容器端传回部分
|名称|类型|是否必须|说明|
|-|-|-|-|
|ok|string|是|指明当前是否成功连接|
|msg|string|是|当连接成功时，则包含容器的字符流；连接失败时，则包含具体说明信息|
