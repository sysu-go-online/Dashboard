# go-online 技术说明文档

## 数据库

![数据库](files/db.png)

- Project表

  project_name：项目名称

  project_id：项目id，系统自增，项目的全局唯一标识

  userid：用户id，外键，指明该项目的用户编号

  language：项目的主语言，具体见下面的语言对照表

## 接口

由于接口的参数返回值和数据库相同，因此不再单独进行说明

## 数据结构定义

对于一个用户，涉及到的变量有以下内容：

- `home`

  家目录，定义在宿主机，即文件服务器中的位置为`/home/{userid}`，其中`userid`为用户ID

- `environment`

  - `GOPATH`

    go语言包的所在目录，指的是容器内部包的位置为`/go`，默认即可

- `mount_point`

  挂载点，即宿主机内部的文件夹以及需要在容器中挂载的位置

- `host_project_dir`

  宿主机项目目录，指的是宿主机中，特定项目的位置为`/home/{username}/go/src/github.com/{github_username}/{project_name}`，其中，`project_name`为项目名，`github_username`为用户链接上的github用户名，若用户并未绑定github账户，则使用创建项目时指定的参数

- `container_project_dir`

  容器内项目目录，为`/root/go/src/github.com/{github_username}/{project_name}`

- `pwd`

  用户当前所在目录，即用户在容器中所在的目录为`{container_project_dir}/{currentpath}`，`currectpath`指的是用户当前相对项目根目录的路径，由服务端记录并维护

## 用例文档

### 注册用户

#### 范围

  go-online系统

#### 级别

  用户目标

#### 主要参与者

  系统用户

#### 涉众及关注点

- 普通用户

  希望可以在最方便的情况下，完成系统的注册以方便之后的使用

- 系统

  希望可以准确区分每一个用户

#### 前置条件

  用户必须是合法的公民且具有使用系统的能力，同时，每一个用户必须可以通过唯一的方式证明其唯一性

#### 后置条件

  存储用户信息，准备用户空间，生成日志，验证用户合法身份

#### 主成功场景

1. 用户进入系统的注册界面

1. 用户填入个人信息

1. 系统对用户信息进行确认和记录

1. 系统生成用户空间

1. 系统发送用户确认信息

1. 用户完成确认

1. 完成注册

#### 扩展

*a. 系统任何时刻失败

  为了数据的回复，系统需要对失败时候的信息进行日志记录

  1. 运维工程师重启系统

  1. 系统读取日志，并恢复到原有状态

*b. 用户任何时候推出

  无操作

2a. 用户填入的个人信息非法

  前端进行提醒并禁用提交按钮

3a. 系统检测到发送到后台的数据非法

  拦截请求，收集并发送错误信息

3b. 系统检测到用户已存在于系统中

  终止操作并返回错误信息

4a. 系统配置用户空间时后台系统错误

  写入日志并挂起该操作，通知运维人员

5a. 系统无法发送确认信息

  写入日志，挂起请求，通知运维人员

6a. 用户长期未确认信息

  发送信息通知用户注册失效，从数据库中抹除用户数据

### 登录系统

### 查看项目

### 增加项目

### 编辑项目

### 执行命令
